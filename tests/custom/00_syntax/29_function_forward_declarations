The `function foo;` syntax allows forward-declaring a function name
before providing its definition. This enables mutual recursion between
functions at the same scope level.


1. A forward-declared function can be defined and called normally.

-- Expect stdout --
hello
-- End --

-- Testcase --
{%
	function greet;

	function greet() {
		return "hello";
	}

	print(greet(), "\n");
%}
-- End --


2. Forward declarations enable mutual recursion.

-- Expect stdout --
[
	true,
	true,
	true,
	true
]
-- End --

-- Testcase --
{%
	function is_even;
	function is_odd;

	function is_even(n) {
		if (n == 0) return true;
		return is_odd(n - 1);
	}

	function is_odd(n) {
		if (n == 0) return false;
		return is_even(n - 1);
	}

	printf("%.J\n", [
		is_even(0),
		is_odd(1),
		is_even(10),
		is_odd(11)
	]);
%}
-- End --


3. Assignment to a forward-declared function is forbidden (constant binding).

-- Expect stderr --
Syntax error: Invalid assignment to constant 'foo'
In line 4, byte 8:

 `    foo = function() { return 2; };`
            ^-- Near here


-- End --

-- Testcase --
{%
	function foo;

	foo = function() { return 2; };
%}
-- End --


4. A `let` declaration after a forward declaration is forbidden.

-- Expect stderr --
Syntax error: Variable 'foo' redeclared
In line 4, byte 6:

 `    let foo = 1;`
          ^-- Near here


-- End --

-- Testcase --
{%
	function foo;

	let foo = 1;
%}
-- End --


5. A `const` declaration after a forward declaration is forbidden.

-- Expect stderr --
Syntax error: Variable 'foo' redeclared
In line 4, byte 8:

 `    const foo = 1;`
            ^-- Near here


-- End --

-- Testcase --
{%
	function foo;

	const foo = 1;
%}
-- End --


6. Defining a function twice after forward declaration is forbidden.

-- Expect stderr --
Syntax error: Redeclaration of constant 'foo'
In line 5, byte 11:

 `    function foo() { return 2; }`
  Near here ---^


-- End --

-- Testcase --
{%
	function foo;

	function foo() { return 1; }
	function foo() { return 2; }
%}
-- End --


7. Duplicate forward declarations are forbidden.

-- Expect stderr --
Syntax error: Function 'foo' redeclared
In line 3, byte 11:

 `    function foo;`
  Near here ---^


-- End --

-- Testcase --
{%
	function foo;
	function foo;
%}
-- End --


8. Forward declaration after a definition is forbidden.

-- Expect stderr --
Syntax error: Variable 'foo' redeclared
In line 3, byte 11:

 `    function foo;`
  Near here ---^


-- End --

-- Testcase --
{%
	function foo() { return 1; }
	function foo;
%}
-- End --


9. Calling an unfilled forward declaration raises a runtime error.

-- Expect stderr --
Type error: left-hand side is not a function
In line 4, byte 6:

 `    foo();`
          ^-- Near here


-- End --

-- Testcase --
{%
	function foo;

	foo();
%}
-- End --


10. A nested function can capture a forward-declared name as upvalue.

-- Expect stdout --
hello from foo
-- End --

-- Testcase --
{%
	function foo;

	function call_foo() {
		return foo();
	}

	function foo() {
		return "hello from foo";
	}

	print(call_foo(), "\n");
%}
-- End --


11. Forward declarations work with export.

-- File test-forward-decl.uc --
export function foo;

function foo() {
	return "exported";
}
-- End --

-- Args --
-R
-- End --

-- Expect stdout --
exported
-- End --

-- Testcase --
import { foo } from "./files/test-forward-decl.uc";

print(foo(), "\n");
-- End --


12. Increment/decrement of a forward-declared function is forbidden.

-- Expect stderr --
Syntax error: Invalid increment/decrement of constant 'foo'
In line 4, byte 5:

 `    foo++;`
         ^-- Near here


-- End --

-- Testcase --
{%
	function foo;

	foo++;
%}
-- End --
