<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link type="text/css" rel="stylesheet" href="ucode.css"><title>Class: cursor</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol><symbol id="toc-icon" viewBox="0 0 460 460"><path d="M40 70a40 40 0 1 0 0 80 40 40 0 0 0 0-80zM40 190a40 40 0 1 0 0 80 40 40 0 0 0 0-80zM40 310a40 40 0 1 0 0 80 40 40 0 0 0 0-80zM430 80H145a30 30 0 0 0 0 60h285a30 30 0 0 0 0-60zM430 200H145a30 30 0 0 0 0 60h285a30 30 0 0 0 0-60zM430 320H145a30 30 0 0 0 0 60h285a30 30 0 0 0 0-60z"/></symbol></defs></svg></head><body data-theme="light"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">ucode Documentation</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="2_mmf64Q0vZqJPdIHyekP"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-01-usage.html">Usage</a></div><div class="sidebar-section-children"><a href="tutorial-02-syntax.html">Syntax</a></div><div class="sidebar-section-children"><a href="tutorial-03-memory.html">Memory Management</a></div><div class="sidebar-section-children"><a href="tutorial-04-arrays.html">Working with Arrays</a></div><div class="sidebar-section-children"><a href="tutorial-05-dictionaries.html">Working with Dictionaries</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="iaJy9TgE7atQTCsQoXgI-"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-core.html">core</a></div><div class="sidebar-section-children"><a href="module-debug.html">debug</a></div><div class="sidebar-section-children"><a href="module-digest.html">digest</a></div><div class="sidebar-section-children"><a href="module-fs.html">fs</a></div><div class="sidebar-section-children"><a href="module-log.html">log</a></div><div class="sidebar-section-children"><a href="module-math.html">math</a></div><div class="sidebar-section-children"><a href="module-socket.html">socket</a></div><div class="sidebar-section-children"><a href="module-struct.html">struct</a></div><div class="sidebar-section-children"><a href="module-uci.html">uci</a></div><div class="sidebar-section-children"><a href="module-uloop.html">uloop</a></div><div class="sidebar-section-children"><a href="module-zlib.html">zlib</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"><div class="github-home navbar-item"><a id="" href="https://github.com/jow-/ucode" target="">GitHub Project Page</a></div></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div><div class="navbar-right-item toc-item"><button class="icon-button toc" aria-label="open-table-of-contents"><svg><use xlink:href="#toc-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section><header><h1 id="cursor-title" class="has-anchor"><span class="ancestors"><a href="module-uci.html">uci</a>.</span> cursor</h1></header><article><div class="container-overview"><div class="description"><p>Represents a context for interacting with uci configuration files.</p><p>Operations on uci configurations are performed through a uci cursor object which operates on in-memory representations of loaded configuration files.</p><p>Any changes made to configuration values are local to the cursor object and held in memory only until they're written out to the filesystem using the <a href="module-uci.cursor.html#save">save()</a> and <a href="module-uci.cursor.html#commit">commit()</a> methods.</p><p>Changes performed in one cursor instance are not reflected in another, unless the first instance writes those changes to the filesystem and the other instance explicitly (re)loads the affected configuration files.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Enumerate configuration files
ctx.configs();

// Load configuration files
ctx.load(…);
ctx.unload(…);

// Query values
ctx.get(…);
ctx.get_all(…);
ctx.get_first(…);
ctx.foreach(…);

// Modify values
ctx.add(…);
ctx.set(…);
ctx.rename(…);
ctx.reorder(…);
ctx.delete(…);

// Stage, revert, save changes
ctx.changes(…);
ctx.save(…);
ctx.revert(…);
ctx.commit(…);</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line256">line 256</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="module-uci.html#cursor">cursor()</a></li></ul></dd></div></dl></div><h2 id="methods" class="subsection-title has-anchor">Methods</h2><h3 class="name has-anchor" id="add"><span class="type-signature"></span>add<span class="signature">(config, type)</span> <span class="type-signature">&rarr; {string}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Add anonymous section to given configuration.</p><p>Adds a new anonymous (unnamed) section of the specified type to the given configuration. In order to add a named section, the three argument form of <code>set()</code> should be used instead.</p><p>In contrast to other query functions, <code>add()</code> will not implicitly load the configuration into the cursor. The configuration either needs to be loaded explicitly through <code>load()</code> beforehand, or implicitly by querying it through one of the <code>get()</code>, <code>get_all()</code>, <code>get_first()</code> or <code>foreach()</code> functions.</p><p>Returns the autogenerated, ephemeral name of the added unnamed section on success.</p><p>Returns <code>null</code> on error, e.g. if the targeted configuration was not loaded or if an invalid section type value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to add the section to, e.g. <code>&quot;system&quot;</code> to modify <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>type</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The type value to use for the added section.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">string</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Load firewall configuration
ctx.load('firewall');

// Add unnamed `config rule` section
const sid = ctx.add('firewall', 'rule');

// Set values on the newly added section
ctx.set('firewall', sid, 'name', 'A test');
ctx.set('firewall', sid, 'target', 'ACCEPT');
…</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line836">line 836</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="changes"><span class="type-signature"></span>changes<span class="signature">(config<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {Object&lt;string: <a href="module-uci.cursor.html#.ChangeRecord">ChangeRecord</a>[]>}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Enumerate pending changes.</p><p>The <code>changes()</code> function returns a list of change records for currently loaded configuration files, originating both from the cursors associated delta directory and yet unsaved cursor changes.</p><p>When the optional &quot;config&quot; parameter is specified, the requested configuration is implicitly loaded if it is not already loaded into the cursor.</p><p>Returns a dictionary of change record arrays, keyed by configuration name.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration could not be loaded.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the configuration file to enumerate changes for, e.g. <code>&quot;system&quot;</code> to query pending changes for the <code>/etc/config/system</code> file.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">Object&lt;string: <a href="module-uci.cursor.html#.ChangeRecord">ChangeRecord</a>[]></span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Enumerate changes for all currently loaded configurations
const deltas = ctx.changes();

// Explicitly load and enumerate changes for the "system" configuration
const deltas = ctx.changes('system');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1832">line 1832</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="commit"><span class="type-signature"></span>commit<span class="signature">(config<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Update configuration files with accumulated cursor changes.</p><p>The <code>commit()</code> function merges changes made to in-memory copies of loaded configuration files as well as existing delta records in the cursors configured delta directory and writes them back into the underlying configuration files, persistently committing changes to the file system.</p><p>When the optional &quot;config&quot; parameter is omitted, all currently loaded configuration files with either present delta records or yet unsaved cursor changes are updated.</p><p>Returns the <code>true</code> if operation completed successfully.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration was not loaded or when a file system error occurred.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the configuration file to commit, e.g. <code>&quot;system&quot;</code> to update the <code>/etc/config/system</code> file.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

ctx.set('system', '@system[0]', 'hostname', 'example.org');
ctx.commit('system');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1668">line 1668</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="configs"><span class="type-signature"></span>configs<span class="signature">()</span> <span class="type-signature">&rarr; {string[]}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Enumerate existing configurations.</p><p>The <code>configs()</code> function yields an array of configuration files present in the cursors associated configuration directory, <code>/etc/config/</code> by default.</p><p>Returns an array of configuration names on success.</p><p>Returns <code>null</code> on error, e.g. due to filesystem errors.</p></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">string[]</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Enumerate all present configuration file names
const configurations = ctx.configs();</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line2001">line 2001</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="delete"><span class="type-signature"></span>delete<span class="signature">(config, section, option<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Delete an option or section from given configuration.</p><p>When invoked with three arguments, the function deletes the given option within the specified section of the given configuration.</p><p>When invoked with two arguments, the function deletes the entire specified section within the given configuration.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the <code>true</code> if specified option or section has been deleted.</p><p>Returns <code>null</code> on error, e.g. if the targeted configuration was not found or if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to delete values in, e.g. <code>&quot;system&quot;</code> to modify <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name to remove the specified option in or, when the subsequent argument is omitted, the section to remove entirely.</p></td></tr><tr><td class="name"><code>option</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The option name to remove within the section.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Delete 'disabled' option in first wifi-iface section
ctx.delete('wireless', '@wifi-iface[0]', 'disabled');

// Delete 'wan' interface
ctx.delete('network', 'lan');

// Delete last firewall rule
ctx.delete('firewall', '@rule[-1]');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1118">line 1118</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="error"><span class="type-signature"></span>error<span class="signature">()</span> <span class="type-signature">&rarr; {string}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Query error information.</p><p>Returns a string containing a description of the last occurred error or <code>null</code> if there is no error information.</p></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">string</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>// Trigger error
const ctx = cursor();
ctx.set("not_existing_config", "test", "1");

// Print error (should yield "Entry not found")
print(ctx.error(), "\n");</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line72">line 72</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="foreach"><span class="type-signature"></span>foreach<span class="signature">(config, type<span class="signature-attributes">nullable</span>, callback)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Iterate configuration sections.</p><p>The <code>foreach()</code> function iterates all sections of the given configuration, optionally filtered by type, and invokes the given callback function for each encountered section.</p><p>When the optional &quot;type&quot; parameter is specified, the callback is only invoked for sections of the given type, otherwise it is invoked for all sections.</p><p>The requested configuration is implicitly loaded into the cursor.</p><p>Returns <code>true</code> if the callback was executed successfully at least once.</p><p>Returns <code>false</code> if the callback was never invoked, e.g. when the configuration is empty or contains no sections of the given type.</p><p>Returns <code>null</code> on error, e.g. when an invalid callback was passed or the requested configuration not found.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The configuration to iterate sections for, e.g. <code>&quot;system&quot;</code> to read the <code>/etc/config/system</code> file.</p></td></tr><tr><td class="name"><code>type</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(nullable)</span><p>Invoke the callback only for sections of the specified type.</p></td></tr><tr><td class="name"><code>callback</code></td><td class="type"><span class="type-signature"><a href="module-uci.cursor.html#.SectionCallback">SectionCallback</a></span></td><td class="description last"><p>The callback to invoke for each section, will receive a section dictionary as sole argument.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Iterate all network interfaces
ctx.foreach('network', 'interface',
	   section => print(`Have interface ${section[".name"]}\n`));</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1899">line 1899</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="get"><span class="type-signature"></span>get<span class="signature">(config, section, option<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {string|string[]}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Query a single option value or section type.</p><p>When invoked with three arguments, the function returns the value of the given option, within the specified section of the given configuration.</p><p>When invoked with just a config and section argument, the function returns the type of the specified section.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the configuration value or section type on success.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration does not exist or if an invalid argument was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to query, e.g. <code>&quot;system&quot;</code> to query values in <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the section to query within the configuration.</p></td></tr><tr><td class="name"><code>option</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the option to query within the section. If omitted, the type of the section is returned instead.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">string&#8239;|&#8239;<wbr>string[]</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Query an option, extended section notation is supported
ctx.get('system', '@system[0]', 'hostname');

// Query a section type (should yield 'interface')
ctx.get('network', 'lan');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line645">line 645</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="get_all"><span class="type-signature"></span>get_all<span class="signature">(config, section<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {Object&lt;string: <a href="module-uci.cursor.html#.SectionObject">SectionObject</a>>|<a href="module-uci.cursor.html#.SectionObject">SectionObject</a>}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Query a complete section or configuration.</p><p>When invoked with two arguments, the function returns all values of the specified section within the given configuration as dictionary.</p><p>When invoked with just a config argument, the function returns a nested dictionary of all sections present within the given configuration.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the section or configuration dictionary on success.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration does not exist or if an invalid argument was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to query, e.g. <code>&quot;system&quot;</code> to query values in <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the section to query within the configuration. If omitted a nested dictionary containing all section values is returned.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">Object&lt;string: <a href="module-uci.cursor.html#.SectionObject">SectionObject</a>>&#8239;|&#8239;<wbr><a href="module-uci.cursor.html#.SectionObject">SectionObject</a></span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Query all lan interface details
ctx.get_all('network', 'lan');

// Dump the entire dhcp configuration
ctx.get_all('dhcp');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line692">line 692</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="get_first"><span class="type-signature"></span>get_first<span class="signature">(config, type, option<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {string|string[]}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Query option value or name of first section of given type.</p><p>When invoked with three arguments, the function returns the value of the given option within the first found section of the specified type in the given configuration.</p><p>When invoked with just a config and section type argument, the function returns the name of the first found section of the given type.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the configuration value or section name on success.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration does not exist or if an invalid argument was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to query, e.g. <code>&quot;system&quot;</code> to query values in <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>type</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section type to find the first section for within the configuration.</p></td></tr><tr><td class="name"><code>option</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the option to query within the section. If omitted, the name of the section is returned instead.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">string&#8239;|&#8239;<wbr>string[]</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Query hostname in first anonymous "system" section of /etc/config/system
ctx.get_first('system', 'system', 'hostname');

// Figure out name of first network interface section (usually "loopback")
ctx.get_first('network', 'interface');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line736">line 736</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="list_append"><span class="type-signature"></span>list_append<span class="signature">(config, section, option, value)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Add an item to a list option in given configuration.</p><p>Adds a single value to an existing list option within the specified section of the given configuration. The configuration is implicitly loaded into the cursor if not already present.</p><p>The new value is appended to the end of the list, maintaining the existing order. No attempt is made to check for or remove duplicate values.</p><p>Returns <code>true</code> if the item was successfully added to the list.</p><p>Returns <code>null</code> on error, e.g. if the targeted option was not found or if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to modify, e.g. <code>&quot;firewall&quot;</code> to modify <code>/etc/config/firewall</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name containing the list option to modify.</p></td></tr><tr><td class="name"><code>option</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The list option name to add a value to.</p></td></tr><tr><td class="name"><code>value</code></td><td class="type"><span class="type-signature">string&#8239;|&#8239;<wbr>boolean&#8239;|&#8239;<wbr>number</span></td><td class="description last"><p>The value to add to the list option.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Add '192.168.1.1' to the 'dns' list in the 'lan' interface
ctx.add_list('network', 'lan', 'dns', '192.168.1.1');

// Add a port to the first redirect section
ctx.add_list('firewall', '@redirect[0]', 'src_dport', '8080');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1240">line 1240</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="list_remove"><span class="type-signature"></span>list_remove<span class="signature">(config, section, option, value)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Remove an item from a list option in given configuration.</p><p>Removes a single value from an existing list option within the specified section of the given configuration. The configuration is implicitly loaded into the cursor if not already present.</p><p>If the specified value appears multiple times in the list, all matching occurrences will be removed.</p><p>Returns <code>true</code> if the item was successfully removed from the list.</p><p>Returns <code>null</code> on error, e.g. if the targeted option was not foundor if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to modify, e.g. <code>&quot;firewall&quot;</code> to modify <code>/etc/config/firewall</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name containing the list option to modify.</p></td></tr><tr><td class="name"><code>option</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The list option name to remove a value from.</p></td></tr><tr><td class="name"><code>value</code></td><td class="type"><span class="type-signature">string&#8239;|&#8239;<wbr>boolean&#8239;|&#8239;<wbr>number</span></td><td class="description last"><p>The value to remove from the list option.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Remove '8.8.8.8' from the 'dns' list in the 'lan' interface
ctx.delete_list('network', 'lan', 'dns', '8.8.8.8');

// Remove a port from the first redirect section
ctx.delete_list('firewall', '@redirect[0]', 'src_dport', '8080');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1287">line 1287</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="load"><span class="type-signature"></span>load<span class="signature">(config)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Explicitly reload configuration file.</p><p>Usually, any attempt to query or modify a value within a given configuration will implicitly load the underlying file into memory. By invoking <code>load()</code> explicitly, a potentially loaded stale configuration is discarded and reloaded from the file system, ensuring that the latest state is reflected in the cursor.</p><p>Returns <code>true</code> if the configuration was successfully loaded.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration does not exist.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to load, e.g. <code>&quot;system&quot;</code> to load <code>/etc/config/system</code> into the cursor.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line394">line 394</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="rename"><span class="type-signature"></span>rename<span class="signature">(config, section, option_or_name, name<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Rename an option or section in given configuration.</p><p>When invoked with four arguments, the function renames the given option within the specified section of the given configuration to the provided value.</p><p>When invoked with three arguments, the function renames the entire specified section to the provided value.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the <code>true</code> if specified option or section has been renamed.</p><p>Returns <code>null</code> on error, e.g. if the targeted configuration was not found or if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to rename values in, e.g. <code>&quot;system&quot;</code> to modify <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name to rename or to rename an option in.</p></td></tr><tr><td class="name"><code>option_or_name</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The option name to rename within the section or, when the subsequent name argument is omitted, the new name of the renamed section within the configuration.</p></td></tr><tr><td class="name"><code>name</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The new name of the option to rename.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Assign explicit name to last anonymous firewall rule section
ctx.rename('firewall', '@rule[-1]', 'my_block_rule');

// Rename 'server' to 'orig_server_list' in ntp section of system config
ctx.rename('system', 'ntp', 'server', 'orig_server_list');

// Rename 'wan' interface to 'external'
ctx.rename('network', 'wan', 'external');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1334">line 1334</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="reorder"><span class="type-signature"></span>reorder<span class="signature">(config, section, index)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Reorder sections in given configuration.</p><p>The <code>reorder()</code> function moves a single section by repositioning it to the given index within the configurations section list.</p><p>The given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the <code>true</code> if specified section has been moved.</p><p>Returns <code>null</code> on error, e.g. if the targeted configuration was not found or if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to move the section in, e.g. <code>&quot;system&quot;</code> to modify <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name to move.</p></td></tr><tr><td class="name"><code>index</code></td><td class="type"><span class="type-signature">number</span></td><td class="description last"><p>The target index to move the section to, starting from <code>0</code>.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Query whole firewall config and reorder resulting dict by type and name
const type_order = ['defaults', 'zone', 'forwarding', 'redirect', 'rule'];
const values = ctx.get_all('firewall');

sort(values, (k1, k2, s1, s2) => {
    // Get weight from type_order array
    let w1 = index(type_order, s1['.type']);
    let w2 = index(type_order, s2['.type']);

    // For unknown type orders, use type value itself as weight
    if (w1 == -1) w1 = s1['.type'];
    if (w2 == -1) w2 = s2['.type'];

    // Get name from name option, fallback to section name
    let n1 = s1.name ?? k1;
    let n2 = s2.name ?? k2;

    // Order by weight
    if (w1 &lt; w2) return -1;
    if (w1 > w2) return 1;

    // For same weight order by name
    if (n1 &lt; n2) return -1;
    if (n1 > n2) return 1;

    return 0;
});

// Sequentially reorder sorted sections in firewall configuration
let position = 0;

for (let sid in values)
  ctx.reorder('firewall', sid, position++);</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1443">line 1443</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="revert"><span class="type-signature"></span>revert<span class="signature">(config<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Revert accumulated cursor changes and associated delta records.</p><p>The <code>revert()</code> function discards any changes made to in-memory copies of loaded configuration files and discards any related existing delta records in the cursors configured delta directory.</p><p>When the optional &quot;config&quot; parameter is omitted, all currently loaded configuration files with either present delta records or yet unsaved cursor changes are reverted.</p><p>Returns the <code>true</code> if operation completed successfully.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration was not loaded or when a file system error occurred.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the configuration file to revert, e.g. <code>&quot;system&quot;</code> to discard any changes for the <code>/etc/config/system</code> file.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

ctx.set('system', '@system[0]', 'hostname', 'example.org');
ctx.revert('system');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1705">line 1705</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="module-uci.cursor.html#save">save()</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="save"><span class="type-signature"></span>save<span class="signature">(config<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Save accumulated cursor changes to delta directory.</p><p>The <code>save()</code> function writes consolidated changes made to in-memory copies of loaded configuration files to the uci delta directory which effectively makes them available to other processes using the same delta directory path as well as the <code>uci changes</code> cli command when using the default delta directory.</p><p>Note that uci deltas are overlayed over the actual configuration file values so they're reflected by <code>get()</code>, <code>foreach()</code> etc. even if the underlying configuration files are not actually changed (yet). The delta records may be either permanently merged into the configuration by invoking <code>commit()</code> or reverted through <code>revert()</code> in order to restore the current state of the underlying configuration file.</p><p>When the optional &quot;config&quot; parameter is omitted, delta records for all currently loaded configuration files are written.</p><p>In case that neither sharing changes with other processes nor any revert functionality is required, changes may be committed directly using <code>commit()</code> instead, bypassing any delta record creation.</p><p>Returns the <code>true</code> if operation completed successfully.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration was not loaded or when a file system error occurred.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The name of the configuration file to save delta records for, e.g. <code>&quot;system&quot;</code> to store changes for <code>/etc/config/system</code>.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

ctx.set('wireless', '@wifi-iface[0]', 'disabled', '1');
ctx.save('wireless');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line1618">line 1618</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="module-uci.cursor.html#commit">commit()</a></li><li><a href="module-uci.cursor.html#revert">revert()</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="set"><span class="type-signature"></span>set<span class="signature">(config, section, option_or_type, value<span class="signature-attributes">opt</span>)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Set option value or add named section in given configuration.</p><p>When invoked with four arguments, the function sets the value of the given option within the specified section of the given configuration to the provided value. A value of <code>&quot;&quot;</code> (empty string) can be used to delete an existing option.</p><p>When invoked with three arguments, the function adds a new named section to the given configuration, using the specified type.</p><p>In either case, the given configuration is implicitly loaded into the cursor if not already present.</p><p>Returns the <code>true</code> if the named section was added or the specified option was set.</p><p>Returns <code>null</code> on error, e.g. if the targeted configuration was not found or if an invalid value was passed.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to set values in, e.g. <code>&quot;system&quot;</code> to modify <code>/etc/config/system</code>.</p></td></tr><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section name to create or set a value in.</p></td></tr><tr><td class="name"><code>option_or_type</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The option name to set within the section or, when the subsequent value argument is omitted, the type of the section to create within the configuration.</p></td></tr><tr><td class="name"><code>value</code></td><td class="type"><span class="type-signature">(string|boolean|number)[]&#8239;|&#8239;<wbr>string&#8239;|&#8239;<wbr>boolean&#8239;|&#8239;<wbr>number</span></td><td class="description last"><span class="inline-attributes">(optional)</span><p>The option value to set.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>const ctx = cursor(…);

// Add named `config interface guest` section
ctx.set('network', 'guest', 'interface');

// Set values on the newly added section
ctx.set('network', 'guest', 'proto', 'static');
ctx.set('network', 'guest', 'ipaddr', '10.0.0.1/24');
ctx.set('network', 'guest', 'dns', ['8.8.4.4', '8.8.8.8']);
…

// Delete 'disabled' option in first wifi-iface section
ctx.set('wireless', '@wifi-iface[0]', 'disabled', '');</code></pre></div></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line959">line 959</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="unload"><span class="type-signature"></span>unload<span class="signature">(config)</span> <span class="type-signature">&rarr; {boolean}<span class="signature-attributes">nullable</span></span></h3><div class="description"><p>Explicitly unload configuration file.</p><p>The <code>unload()</code> function forcibly discards a loaded configuration state from the cursor so that the next attempt to read or modify that configuration will load it anew from the file system.</p><p>Returns <code>true</code> if the configuration was successfully unloaded.</p><p>Returns <code>false</code> if the configuration was not loaded to begin with.</p><p>Returns <code>null</code> on error, e.g. if the requested configuration does not exist.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>config</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The name of the configuration file to unload.</p></td></tr></tbody></table></div><div class="method-member-container mt-20"><strong>Returns:</strong> <span class="type-signature">boolean</span></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line444">line 444</a></li></ul></dd></div></dl><h2 id="type-definitions" class="subsection-title has-anchor">Type Definitions</h2><h3 class="name has-anchor" id=".ChangeRecord"><span class="type-signature"></span>ChangeRecord<span class="type-signature">:&#8201;string[]</span></h3><div class="description"><p>A uci change record is a plain array containing the change operation name as first element, the affected section ID as second argument and an optional third and fourth argument whose meanings depend on the operation.</p></div><b class="subsection-title">Properties</b><div class="allow-overflow"><table class="props"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>0</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The operation name - may be one of <code>add</code>, <code>set</code>, <code>remove</code>, <code>order</code>, <code>list-add</code>, <code>list-del</code> or <code>rename</code>.</p></td></tr><tr><td class="name"><code>1</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The section ID targeted by the operation.</p></td></tr><tr><td class="name"><code>2</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The meaning of the third element depends on the operation.</p><ul><li>For <code>add</code> it is type of the section that has been added</li><li>For <code>set</code> it either is the option name if a fourth element exists, or the type of a named section which has been added when the change entry only contains three elements.</li><li>For <code>remove</code> it contains the name of the option that has been removed.</li><li>For <code>order</code> it specifies the new sort index of the section.</li><li>For <code>list-add</code> it contains the name of the list option a new value has been added to.</li><li>For <code>list-del</code> it contains the name of the list option a value has been removed from.</li><li>For <code>rename</code> it contains the name of the option that has been renamed if a fourth element exists, else it contains the new name a section has been renamed to if the change entry only contains three elements.</li></ul></td></tr><tr><td class="name"><code>4</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The meaning of the fourth element depends on the operation.</p><ul><li>For <code>set</code> it is the value an option has been set to.</li><li>For <code>list-add</code> it is the new value that has been added to a list option.</li><li>For <code>rename</code> it is the new name of an option that has been renamed.</li></ul></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line309">line 309</a></li></ul></dd></div></dl><h3 class="name has-anchor" id=".ParserFlags"><span class="type-signature"></span>ParserFlags<span class="type-signature">:&#8201;Object</span></h3><b class="subsection-title">Properties</b><div class="allow-overflow"><table class="props"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>strict</code></td><td class="type"><span class="type-signature">boolean</span></td><td class="description last"><p>Strict parsing mode (enabled by default). Aborts parsing when encountering a parser error.</p></td></tr><tr><td class="name"><code>print_errors</code></td><td class="type"><span class="type-signature">boolean</span></td><td class="description last"><p>Print parser errors to stderr.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line124">line 124</a></li></ul></dd></div></dl><h3 class="name has-anchor" id=".SectionCallback"><span class="type-signature"></span>SectionCallback<span class="signature">(section)</span><span class="type-signature">:&#8201;function</span></h3><div class="description"><p>The sections callback is invoked for each section found within the given configuration and receives the section object and its associated name as arguments.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>section</code></td><td class="type"><span class="type-signature"><a href="module-uci.cursor.html#.SectionObject">SectionObject</a></span></td><td class="description last"><p>The section object.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line383">line 383</a></li></ul></dd></div></dl><h3 class="name has-anchor" id=".SectionObject"><span class="type-signature"></span>SectionObject<span class="type-signature">:&#8201;Object&lt;string: (boolean|number|string|string[])></span></h3><div class="description"><p>A section object represents the options and their corresponding values enclosed within a configuration section, as well as some additional meta data such as sort indexes and internal ID.</p><p>Any internal metadata fields are prefixed with a dot which isn't an allowed character for normal option names.</p></div><b class="subsection-title">Properties</b><div class="allow-overflow"><table class="props"><thead><tr><th>Name</th><th class="type">Type</th><th class="description last">Description</th></tr></thead><tbody><tr><td class="name"><code>.anonymous</code></td><td class="type"><span class="type-signature">boolean</span></td><td class="description last"><p>The <code>.anonymous</code> property specifies whether the configuration is anonymous (<code>true</code>) or named (<code>false</code>).</p></td></tr><tr><td class="name"><code>.index</code></td><td class="type"><span class="type-signature">number</span></td><td class="description last"><p>The <code>.index</code> property specifies the sort order of the section.</p></td></tr><tr><td class="name"><code>.name</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The <code>.name</code> property holds the name of the section object. It may be either an anonymous ID in the form <code>cfgXXXXXX</code> with <code>X</code> being a hexadecimal digit or a string holding the name of the section.</p></td></tr><tr><td class="name"><code>.type</code></td><td class="type"><span class="type-signature">string</span></td><td class="description last"><p>The <code>.type</code> property contains the type of the corresponding uci section.</p></td></tr><tr><td class="name"><code>*</code></td><td class="type"><span class="type-signature">string&#8239;|&#8239;<wbr>string[]</span></td><td class="description last"><p>A section object may contain an arbitrary number of further properties representing the uci option enclosed in the section.</p><p>All option property names will be in the form <code>[A-Za-z0-9_]+</code> and either contain a string value or an array of strings, in case the underlying option is an UCI list.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_uci.c.html">lib/uci.c</a>, <a href="lib_uci.c.html#line347">line 347</a></li></ul></dd></div></dl></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button> <button class="icon-button" id="mobile-toc" data-isopen="false" aria-label="toc"><svg><use xlink:href="#toc-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">ucode Documentation</a><div class="mobile-nav-links"><div class="github-home navbar-item"><a id="" href="https://github.com/jow-/ucode" target="">GitHub Project Page</a></div></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="2_mmf64Q0vZqJPdIHyekP"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-01-usage.html">Usage</a></div><div class="sidebar-section-children"><a href="tutorial-02-syntax.html">Syntax</a></div><div class="sidebar-section-children"><a href="tutorial-03-memory.html">Memory Management</a></div><div class="sidebar-section-children"><a href="tutorial-04-arrays.html">Working with Arrays</a></div><div class="sidebar-section-children"><a href="tutorial-05-dictionaries.html">Working with Dictionaries</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="iaJy9TgE7atQTCsQoXgI-"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-core.html">core</a></div><div class="sidebar-section-children"><a href="module-debug.html">debug</a></div><div class="sidebar-section-children"><a href="module-digest.html">digest</a></div><div class="sidebar-section-children"><a href="module-fs.html">fs</a></div><div class="sidebar-section-children"><a href="module-log.html">log</a></div><div class="sidebar-section-children"><a href="module-math.html">math</a></div><div class="sidebar-section-children"><a href="module-socket.html">socket</a></div><div class="sidebar-section-children"><a href="module-struct.html">struct</a></div><div class="sidebar-section-children"><a href="module-uci.html">uci</a></div><div class="sidebar-section-children"><a href="module-uloop.html">uloop</a></div><div class="sidebar-section-children"><a href="module-zlib.html">zlib</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div><div class="navbar-right-item toc-item"><button class="icon-button toc" aria-label="open-table-of-contents"><svg><use xlink:href="#toc-icon"></use></svg></button></div></div></div></div><div id="mobile-tocbar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><span class="sidebar-title">Table of Contents</span><div class="toc-contents"></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#mobile-tocbar > .mobile-sidebar-wrapper > .toc-contents",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:(...e)=>{hideMobileMenu(),bringLinkToView(...e)},includeHtml:!0})</script></body></html>